Entendido perfectamente. La meta es transformar una solicitud vaga de "inyectar opciones en un men煤" en la estructura modular correcta del App Router, asumiendo el patr贸n de inyecci贸n `moduleMenu` / `additionalItems` que ya establecimos.

Aqu铆 est谩 el prompt refinado. Se centra en el **resultado modular** y la **creaci贸n/modificaci贸n de los dos archivos necesarios** (`MiM贸duloMenu.tsx` y `MiM贸duloSettings.tsx`).

---

##  Prompt para Inyecci贸n Modular de tems en el Men煤 de Usuario

**Objetivo:** Transformar una solicitud de inyecci贸n de opciones de men煤 de un m贸dulo (ej., "Travel", "Inventory") en la arquitectura modular de Server/Client Components que utiliza el `UnifiedAppHeader`. Esto implica crear o modificar los componentes necesarios para inyectar 铆tems personalizados (especialmente si abren un Di谩logo/Modal) en el men煤 desplegable del usuario (el *slot* `moduleMenu` / `additionalItems`).

### 1. Instrucciones de Entrada

El usuario proporcionar谩:

* **Nombre del M贸dulo:** (Ej., "Inventory", "Travel", "Contabilidad").
* **Lista de Opciones:** Las acciones o 铆tems de men煤 que deben inyectarse (Ej., "Configurar Categor铆as", "Gestionar Filtros").
* **Archivos Base:** Un fragmento de c贸digo que muestre las opciones o el men煤 deseado (incluso si est谩 mal estructurado o es solo texto).

### 2. Tarea de Conversi贸n (L贸gica del Bot)

El objetivo es modularizar y estructurar el c贸digo en dos archivos principales, asumiendo la arquitectura de men煤s:

* **Slot de Inyecci贸n:** Se utilizar谩 el slot **`moduleMenu`** de `UnifiedAppHeader` (que se pasa como `additionalItems` al `UserMenu`).
* **Patr贸n de Di谩logo:** Para cualquier 铆tem que abra un modal/di谩logo (el patr贸n por defecto para la configuraci贸n), se aplicar谩 la t茅cnica de **Clonaci贸n de Elementos (`React.cloneElement`) y manejo de `onSelect`** para prevenir el cierre prematuro del men煤.

### 3. Output Estructurado Requerido

Generar los siguientes archivos necesarios para la inyecci贸n:

#### A. **`[M贸dulo]Menu.tsx` (Server Component)**

* **Rol:** Act煤a como el inyector (`moduleMenu`).
* **Contenido:** Devuelve un `<Fragment>` que contiene los 铆tems deseados (incluyendo el `[M贸dulo]Settings` si es un di谩logo) y un `<DropdownMenuSeparator />` al final (para aislarlo de los 铆tems CORE).

#### B. **`[M贸dulo]Settings.tsx` (Client Component)**

* **Rol:** Maneja el estado (`useState`), el contenido del `Dialog`, y el *trigger* del men煤.
* **Contenido:** Implementa el patr贸n de envoltura para `children` (el `DropdownMenuItem` visual):
    * Usa `import React from 'react'`.
    * Usa `React.cloneElement` para inyectar el *handler* `onSelect` con `e.preventDefault()` y `setOpen(true)`.
    * Devuelve el *trigger* clonado y el componente `<Dialog>`.

#### C. **Instrucciones de Uso**

* Indicar c贸mo inyectar el nuevo `[M贸dulo]Menu` en la p谩gina principal (`page.tsx`) del m贸dulo usando la prop `moduleMenu`.